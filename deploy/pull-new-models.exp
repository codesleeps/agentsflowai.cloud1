#!/usr/bin/expect -f
set timeout 300
set password "n/6Y#PRl(.ovLy@D,veW"
spawn ssh root@72.61.16.111
expect "password:"
send "$password\r"
expect "# "

# Pull Ministral 3B (Check exact name, usually ministral-8b is common, but let's try ministral:8b or similar. 
# Actually search result said ministral-3:3b or ministral-3b. Let's try 'ollama pull ministral-3b')
send "ollama pull ministral-3b\r"
expect {
    "pulling manifest" {
        exp_continue
    }
    "Error: pull model manifest: file does not exist" {
        puts "Model ministral-3b not found. Trying ministral..."
        send "ollama pull ministral\r"
        exp_continue
    }
    "# " {
        puts "Ministral pull complete or failed."
    }
}

# Try Gemini (likely will fail or be gemma)
send "ollama pull gemini-3-flash-preview\r"
expect {
    "pulling manifest" {
        exp_continue
    }
    "Error" {
        puts "Gemini model not found (expected for cloud model). Trying gemma2:9b..."
        send "ollama pull gemma2:9b\r"
        exp_continue
    }
    "# " {
        puts "Gemini/Gemma check complete."
    }
}

send "exit\r"
expect "# "
send "exit\r"
expect eof
